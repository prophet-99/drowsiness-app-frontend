<!-- HEADER -->
<article class="mb-4 flex items-center gap-3">
  <button
    class="text-gray-800 hover:text-white border border-gray-800 hover:bg-gray-800 focus:ring-2 focus:outline-none focus:ring-gray-300 font-medium rounded-lg p-3 text-sm transition-colors duration-300"
    type="button"
    routerLink="/users"
  >
    <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 8 14">
      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 1 1.3 6.326a.91.91 0 0 0 0 1.348L7 13"/>
    </svg>
  </button>
  <h1 class="text-3xl text-gray-800 font-semibold whitespace-nowrap text-ellipsis overflow-hidden">
    Crear usuario
  </h1>
</article>
<!-- HEADER -->
<!-- CARD -->
<article class="p-3 md:p-6 bg-white border border-gray-200 rounded-lg shadow">
  <form [formGroup]="userForm" (ngSubmit)="processUser()">
    <!-- NAMES AND LAST NAMES -->
    <article class="grid md:grid-cols-2 gap-4 mb-4">
      <section>
        <label class="block mb-2 text-sm font-medium text-gray-600" for="namesId">
          Nombres
        </label>
        <input 
          class="block w-full p-2.5 outline-none bg-gray-50 border text-sm rounded-lg focus:ring-1"
          [ngClass]="{
            'border-gray-300 text-gray-600 focus:ring-indigo-300 focus:border-indigo-300': !hasGenericError('name'),
            'border-red-500 text-red-900 focus:ring-red-300 focus:border-red-300': hasGenericError('name')
          }"
          id="namesId"
          type="text"
          placeholder="Ingrese los nombres"
          autocomplete="off"
          formControlName="name"
        />
        <p class="mt-2 text-sm font-medium text-red-600" *ngIf="hasRequiredError('name')">
          Los nombres son obligatorios
        </p>
      </section>
      <section>
        <label class="block mb-2 text-sm font-medium text-gray-600" for="lastNamesId">
          Apellidos
        </label>
        <input
          class="block w-full p-2.5 outline-none bg-gray-50 border text-sm rounded-lg focus:ring-1"
          [ngClass]="{
            'border-gray-300 text-gray-600 focus:ring-indigo-300 focus:border-indigo-300': !hasGenericError('lastName'),
            'border-red-500 text-red-900 focus:ring-red-300 focus:border-red-300': hasGenericError('lastName')
          }"
          id="lastNamesId"
          type="text"
          placeholder="Ingrese los apellidos"
          autocomplete="off"
          formControlName="lastName"
        />
        <p class="mt-2 text-sm font-medium text-red-600" *ngIf="hasRequiredError('lastName')">
          Los apellidos son obligatorios
        </p>
      </section>
    </article>
    <!-- NAMES AND LAST NAMES -->
    <!-- DNI AND CELLPHONE -->
    <article class="grid md:grid-cols-2 gap-4 mb-4">
      <section>
        <label class="block mb-2 text-sm font-medium text-gray-600" for="dniId">
          DNI
        </label>
        <input 
          class="block w-full p-2.5 outline-none bg-gray-50 border text-sm rounded-lg focus:ring-1"
          [ngClass]="{
            'border-gray-300 text-gray-600 focus:ring-indigo-300 focus:border-indigo-300': !hasGenericError('dni'),
            'border-red-500 text-red-900 focus:ring-red-300 focus:border-red-300': hasGenericError('dni')
          }"
          id="dniId"
          type="text"
          placeholder="Ingrese el número de DNI"
          autocomplete="off"
          formControlName="dni"
        />
        <p class="mt-2 text-sm font-medium text-red-600" *ngIf="hasRequiredError('dni')">
          El número de DNI es obligatorio
        </p>
        <p class="mt-2 text-sm font-medium text-red-600" *ngIf="hasMaxLengthError('dni') || hasMinLengthError('dni')">
          El número de DNI debe tener 8 dígitos
        </p>
        <p class="mt-2 text-sm font-medium text-red-600" *ngIf="hasPatternError('dni')">
          El número de DNI debe ser numérico
        </p>
      </section>
      <section>
        <label class="block mb-2 text-sm font-medium text-gray-600" for="cellphoneId">
          Celular
        </label>
        <input
          class="block w-full p-2.5 outline-none bg-gray-50 border text-sm rounded-lg focus:ring-1"
          [ngClass]="{
            'border-gray-300 text-gray-600 focus:ring-indigo-300 focus:border-indigo-300': !hasGenericError('cellphone'),
            'border-red-500 text-red-900 focus:ring-red-300 focus:border-red-300': hasGenericError('cellphone')
          }"
          id="cellphoneId"
          type="text"
          placeholder="Ingrese el número de celular"
          autocomplete="off"
          formControlName="cellphone"
        />
        <p class="mt-2 text-sm font-medium text-red-600" *ngIf="hasRequiredError('cellphone')">
          El número de celular es obligatorio
        </p>
        <p class="mt-2 text-sm font-medium text-red-600" *ngIf="hasMaxLengthError('cellphone') || hasMinLengthError('cellphone')">
          El número de celular debe tener 9 dígitos
        </p>
        <p class="mt-2 text-sm font-medium text-red-600" *ngIf="hasPatternError('cellphone')">
          El número de celular debe ser numérico
        </p>
      </section>
    </article>
    <!-- DNI AND CELLPHONE -->
    <!-- EMAIL -->
    <article class="grid md:grid-cols-2 gap-4 mb-4">
      <section>
        <label class="block mb-2 text-sm font-medium text-gray-600" for="emailId">
          Email
        </label>
        <input 
          class="block w-full p-2.5 outline-none bg-gray-50 border text-sm rounded-lg focus:ring-1"
          [ngClass]="{
            'border-gray-300 text-gray-600 focus:ring-indigo-300 focus:border-indigo-300': !hasGenericError('email'),
            'border-red-500 text-red-900 focus:ring-red-300 focus:border-red-300': hasGenericError('email')
          }"
          id="emailId"
          type="email"
          placeholder="Ingrese el correo electrónico"
          autocomplete="off"
          formControlName="email"
        />
        <p class="mt-2 text-sm font-medium text-red-600" *ngIf="hasRequiredError('email')">
          El email es obligatorio
        </p>
        <p class="mt-2 text-sm font-medium text-red-600" *ngIf="hasPatternError('email')">
          El email debe ser válido
        </p>
      </section>
      <!-- EMAIL -->
      <!-- PHOTO -->
      <section>
        <label class="block mb-2 text-sm font-medium text-gray-600" for="photoId">
          Foto (jpg)
        </label>
        <input
          class="block w-full p-2.5 outline-none bg-gray-50 border text-sm rounded-lg focus:ring-1"
          [ngClass]="{
            'border-gray-300 text-gray-600 focus:ring-indigo-300 focus:border-indigo-300': !hasGenericError('photo'),
            'border-red-500 text-red-900 focus:ring-red-300 focus:border-red-300': hasGenericError('photo')
          }"
          id="photoId"
          type="file"
          accept=".jpg"
          (change)="whenFileInputChange($event)"
          #photoInput
        />
        <p class="mt-2 text-sm font-medium text-red-600" *ngIf="hasExtensionError('photo')">
          Formato inválido, solo esta permitido: .jpg
        </p>
      </section>
    </article>
    <!-- PHOTO -->
    <article class="flex justify-end gap-2">
      <button
        class="text-white font-medium rounded-lg px-7 py-2 transition-colors duration-300"
        [ngClass]="{
          'bg-indigo-300 cursor-not-allowed': userForm.invalid,
          'bg-indigo-500 hover:bg-indigo-600 focus:ring-2 focus:outline-none focus:ring-indigo-300': userForm.valid
        }"
        type="submit"
        [disabled]="userForm.invalid"
      >
        Aceptar
      </button>
      <button
        class="text-indigo-500 hover:text-white border border-indigo-500 hover:bg-indigo-500 focus:bg-indigo-600 focus:ring-2 focus:outline-none focus:ring-indigo-300 font-medium rounded-lg px-7 py-2 transition-colors duration-300"
        type="button"
        routerLink="/users"
      >
        Cancelar
      </button>
    </article>
  </form>
</article>
<!-- CARD -->

<!-- SNACK BAR -->
<app-snack-bar></app-snack-bar>
<!-- SNACK BAR -->
